@model ShippingModel

@if (string.IsNullOrEmpty(Model.Error))
{
    <div class="card card-secondary card-outline">
        <div> <!-- to avoid binding click trigger: .card.card-secondary > .card-header  --> 
            <div class="card-header with-border clearfix">
                <div class="card-title">
                    <i class="fas fa-truck"></i>
                    @T("Plugins.Shipping.EasyPost.Shipment")
                </div>
            </div>
        </div>
    
        <div class="card-body">
            <div class="form-group row advanced-setting">
                
                <div class="col-md-3">
                    <nop-label asp-for="Parcel.length" />
                </div>
                <div class="col-md-9">
                    <nop-editor asp-for="Parcel.length" asp-postfix="@Model.Parcel.length" />
                    <span asp-validation-for="Parcel.length"></span>
                </div>
            </div>

            <div class="col-md-3">
                <button type="submit" asp-route="@EasyPostDefaults.GetShippingRates">
                    Get Rates
                </button>
            </div>

            @if (Model.ShippingOptions.Any())
            {
                <ul class="method-list">
                    @for (var i = 0; i < Model.ShippingOptions.Count; i++)
                    {
                        var shippingMethod = Model.ShippingOptions[i];
                        <li>
                            <div class="method-name">
                                <input id="shippingoption_@(i)" type="radio" name="shippingoption" value="@(shippingMethod.Name)" checked="@shippingMethod.Selected" />
                                <label for="shippingoption_@(i)">@T("Checkout.SelectShippingMethod.MethodAndFee", shippingMethod.Name, shippingMethod.Rate)</label>
                            </div>
                            @if (!string.IsNullOrEmpty(shippingMethod.Description))
                            {
                                <div class="method-description">
                                    @Html.Raw(shippingMethod.Description)
                                </div>
                            }
                        </li>
                    }
                </ul>
            }
        </div>
    </div>

}
else
{
    <nop-alert asp-alert-id="easypost-alert" asp-alert-message="@Model.Error" />
    <script>
        $(document).ready(function () {
            $("#easypost-alert").click();
        });
    </script>
}